<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>My Portfolio</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet">
    <link rel="stylesheet" href="libs/font-awesome/css/font-awesome.min.css">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
</head>

<body>
    <!-- <div id="mobile-menu-open" class="shadow-large">
        <i class="fa fa-bars" aria-hidden="true"></i>
    </div> -->
    <!-- End #mobile-menu-toggle -->
    <!-- <header>
        <div id="mobile-menu-close">
            <span>Close</span> <i class="fa fa-times" aria-hidden="true"></i>
        </div>
        <ul id="menu" class="shadow">
            <a href="index.html">Back to the home page</a>
        </ul>
    </header> -->
    <!-- End header -->

    <div id="lead" style="background-image: url(../images/projects/swarm/InspectionGif.gif);">...</div>
    <div id="lead-content">
        <h1>A Swarm of Aircraft Inspection Drones</h1>
        <h2>My BSc. graduation project</h2>
        <a href="index.html" class="btn-rounded-white">Back to homepage</a>
    </div>
    <!-- End #lead-content -->

    <!-- <div id="lead-overlay"></div> -->

    <div id="lead-down">
        <span>
            <i class="fa fa-chevron-down" aria-hidden="true"></i>
        </span>
        <!-- </div> -->
        <!-- End #lead-down -->
    </div>
    <!-- End #lead -->
    <div id="textbody">
        <div class="container">
            <div class="row">
                <div>
                    <h1>Summary</h1>
                    <p>
                        As my graduation project for the aerospace bachelor, I worked on a project with a team of
                        Aerospace students to develop a
                        simulation of
                        a swarm of inspection drones for aircraft inspection using Unity. I was responsible for
                        simulating
                        the
                        inspection performed by the drones, which included full 6DOF drone kinematics, outer loop drone
                        control,
                        drone camera simulations, pathfinding, and collision avoidance. The project was awarded the 2500
                        euro
                        NLF Aerospace WO Technical Award and we are continuing our work on the project outisde of our
                        studies.
                    <p>

                    <p>
                        The main strong point of the simulations and algorithms we immplemented were their flexibility.
                        Although the project was focused on
                        aircraft
                        inspection, the algorithms we used were designed to be as general as possible, so the simulation
                        could
                        be used for the inspection of any 3D object, such as a wind turbine, rocket or a bridge.
                    </p>

                    <div class="image-container">
                        <img src="images/homepage/combined.gif" class="image-width" style="width: 49%;" />
                        <img src="images/projects/swarm/inspectionGate.gif" class="image-width" style="width: 49%;" />
                    </div>

                    <p>
                        One of the challenges we faced was determining the optimal locations where the drones would take
                        pictures. We solved this optimization problem using two intertwined algorithms. The first
                        algorithm
                        distributed the global locations of the pictures around the aircraft, and the second fine-tuned
                        the specific position and angle of each picture.
                    </p>

                    <figure style="float: right;">
                        <img src="images/projects/swarm/VR.gif"/>
                    </figure>

                    <p>
                        Another challenge was distributing the picture locations among the drones to minimize inspection
                        time.
                        This is known as the Multiple Traveling Salesmen Problem (MTSP), and we solved it using a
                        real-time
                        greedy algorithm and a global genetic algorithm. We then used A* on a 3D graph to
                        construct the routes between the generated
                        waypoints.
                    </p>

                    <p>
                        Finally, we implemented an Optimal Reciprocal Collision Avoidance (ORCA) system for the drones
                        to
                        avoid
                        collisions with each other and any obstacles in their environment. The ORCA system was able to
                        resolve
                        conflicts in real-time and allowed the drones to move safely around the aircraft and the
                        observer.
                    </p>

                    <p>
                        Overall, the project was a great learning experience and allowed me to apply my knowledge of
                        drone
                        kinematics, control, optimization and pathfinding to a real-world problem. The final simulation,
                        which can be
                        viewed
                        in Virtual Reality, shows the inspection being performed by the drones and their real-time
                        collision
                        avoidance.
                    </p>

                    

                </div>

                <div>
                    <h1>More details</h1>
                    <p>
                        Three weeks ago nine other Aerospace students and I finished our Design Synthesis Exercise of a
                        Swarm of Inspection Drones For Aircraft Inspection. In the last part of this 10-week exercise, I
                        worked on simulating the inspection performed by the drones in Unity. This simulation featured
                        full
                        6DOF drone kinematics, outer loop drone control, drone camera simulations, pathfinding and
                        collision
                        avoidance. The final simulation can be viewed in Virtual Reality where the observer can walk
                        around
                        the aircraft while the inspection is being performed by the drones. The drones then also avoid
                        this
                        observer in real-time as can be seen below:
                    </p>

                    <p>
                        One of the aspects of the simulation that I am most proud of is its generality. Although the
                        scope
                        of the project was focused on the inspection of aircraft for maintenance, the used algorithms
                        were
                        selected and implemented to be as general as possible. This means that the simulation can also
                        be
                        used to simulate the drone inspection of any 3D object, be it a wind turbine, a Falcon 9 or a
                        bridge. I will now walk through the most interesting parts of the simulation in greater detail.
                    </p>

                    <h2>Generating the picture positions</h2>
                    <p>
                        Starting from the 3D model of the aircraft that has to be inspected, how the drones will inspect
                        this
                        aircraft must be determined. First, it must be determined which drones will take pictures at
                        which
                        locations. In distributing these picture locations, the number of pictures and the overlap
                        between
                        the
                        pictures has to be minimised while keeping the coverage of the aircraft as large as possible.
                        This
                        problem is further complicated because there are two drone types with different camera types
                        with
                        different properties. These properties, such as the resolution and gimbal limits, constrain the
                        allowed
                        picture positions.
                    </p>

                    <p>
                        This distribution problem was solved using two intertwined algorithms, one which distributes the
                        global locations of the pictures around the aircraft and one which fine-tunes the specific
                        position
                        and angle of just one picture. The global algorithm performs multiple iterative sweeps of the
                        aircraft, during which the local algorithm optimises a mathematical scoring function using a
                        greedy
                        algorithm. The score of a given picture position takes into account how much of the surface is
                        covered, the overlap with other pictures, the angle to the normal of the surface etc.
                    </p>

                    <p>
                        The resulting distribution around a Boeing 757 can be seen below. The green dots indicate
                        picture
                        positions for a larger drone type (which has a downward gimballing camera), while the blue dots
                        indicate picture positions for a smaller drone with an upward gimballing camera.
                    </p>

                    <h2>Drone routing</h2>
                    <p>
                        The next problem is distributing these picture locations over the drones while minimising the
                        inspection time. This problem is known as a Multiple Traveling Salesmen Problem (MTSP). Due to
                        the project's time constraints, the simulation was performed using a real-time greedy algorithm
                        on the drones. This algorithm considered factors such as the drone density at a given picture
                        position, the distance to the picture and how closely the camera was already gimballed to that
                        desired picture position
                    </p>

                    <p>
                        With the waypoints the drones have to reach now known, the routes between those points were
                        constructed using a simple A* algorithm on a 3D graph (shoutout to Aron Granberg's amazing 2D A*
                        pathfinding project on which this code is based). The (simplified) graph and the resulting drone
                        paths are shown in the picture below:
                    </p>

                    <p>
                        This pathfinding does not take into account the possible collisions between the drones. This was
                        an explicit choice in the design process, the collision avoidance system between the drones is
                        responsible for conflict resolution.
                    </p>

                    <h2>Drone collision avoidance</h2>
                    <p>
                        Optimal Reciprocal Collision Avoidance (ORCA) was chosen as the collision avoidance system for
                        the drones. This is a very powerful and intuitive algorithm, and I had great fun implementing it
                        and playing with it.
                    </p>

                    <p>
                        The main advantage of ORCA is that it is entirely decentralized, so no communication is required
                        between the drones. The algorithm also scales very well with an increasing number of agents and
                        is computationally cheap. The algorithm works with Velocity Obstacles which are forbidden
                        regions in the velocity space where the drones cannot place their relative velocities. In the
                        pictures on the right, you can see them visualised in the simulation as cones. If you doubt
                        whether this algorithm would work in real life, it has been experimentally validated in the
                        literature on real drones in real-time using just camera sensors (3-D Reciprocal Collision
                        Avoidance on Physical Quadrotor Helicopters with On-Board Sensing for Relative Positioning)
                        In implementing this algorithm for the simulation, I used (to the best of my knowledge) two
                        novel solutions to make the algorithm simpler to implement and computationally cheaper. The
                        algorithm as implemented can make the drones avoid collisions both with complex stationary
                        objects and with other drones. The static object avoidance surprised me with its power in
                        letting the drone navigate tight spaces, as shown below or in the full hangar, as is shown in
                        the next section.
                    </p>

                    <p>
                        The following video shows the decentralised collision avoidance of 40 drones trying to cross a
                        circle (note the emergent symmetries).
                    </p>

                    <h2>Drone quaternion control</h2>
                    <p>
                        To control the drones, I implemented a heap of PID controllers where the most interesting thing
                        is the attitude controller. The drones are modelled down to the forces and torques acting on
                        them. To control the attitude of the drone on the torque level, I implemented a quaternion
                        controller. I chose quaternions because, honestly, I just really dislike Euler angles. The power
                        of this quaternion controller in conjunction with ORCA is shown in the following video. The
                        emergent behaviour shown here is just so exciting to me. The only inputs to the drones are that
                        the large drone wants to stay as close to a waypoint on the aircraft while the small drones are
                        trying to get on the large drone's position. The resulting behaviour is just so exciting, the
                        small drones circling each other (while not colliding), diving in between the hangar beams and
                        then the large drone diving almost vertically to the ground. When the small drones provided
                        space for each other to pull out of their respective dives at the end of the video, I knew this
                        was a truly powerful algorithm. This looks like a budget Top Gun with drones.
                    </p>

                    <p>
                        All the elements discussed previously were implemented in Unity. Below is a video showing the
                        complete simulation. I chose to implement the simulation in the Unity High Definition Rendering
                        Pipeline (HDRP). While this was a tremendous pain to get working correctly, the end result more
                        than made up for that. One of the features made possible using the HDRP was the projection of
                        the pictures taken by the drones onto the mesh of the aircraft. Besides this, HDRP has also come
                        a long way in performance for VR and now runs smoothly on a laptop RTX 2080.
                    </p>

                    <p>
                        Another function of the Unity simulation is headless running, where the simulation is run
                        without rendering. This allowed us to investigate not just the performance of a single swarm
                        configuration but to explore a large landscape of drone combinations:
                    </p>

                    <p>
                        My experience working on this project
                        Working on the simulation and the whole DSE has been an enjoyable experience. I learned a lot
                        and it was fun to see the development of this project from start to finish. Below is more
                        information about the whole project. Feel free to contact me for any more information.
                    </p>

                    <h2>Continuation and awards</h2>
                    <p>

                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- End #about -->
</body>

</html>